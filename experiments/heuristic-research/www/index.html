<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Heuristic Research Playground: 3D vector data</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
<noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
<script src="bootstrap.js"></script>
<main>
    <h1>ðŸ”¬ Heuristic Research Playground</h1>

    <div class="row">
        <!-- Benchmark Configuration -->
        <div class="column controls-panel">
            <div class="control-group">
                <div class="select-wrap">
                    <label>Benchmark Type</label>
                    <select id="benchmarkType">
                        <option value="function">Function Optimization</option>
                        <option value="vrp">Vehicle Routing Problem</option>
                    </select>
                </div>
            </div>

            <div id="functionControls" class="benchmark-controls">
                <div class="control-group">
                    <div class="select-wrap">
                        <label>Function</label>
                        <select id="plotFunction">
                            <option value="rosenbrock">Rosenbrock</option>
                            <option value="rastrigin">Rastrigin</option>
                            <option value="himmelblau">Himmelblau</option>
                            <option value="ackley">Ackley</option>
                            <option value="matyas">Matyas</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-group" style="min-height: 60px;">
                    <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 6px;">
                        <input type="checkbox" id="autoInitPoint" checked>
                        <span style="font-size: 11px;">Random Initial Point</span>
                    </label>
                    
                    <div id="manualPointControls" class="hide">
                        <div class="control-row" style="gap: 6px;">
                            <div style="flex: 1;">
                                <input type="number" id="initX" step="0.1" value="0" 
                                       placeholder="X" 
                                       style="width: 100%; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 12px;">
                            </div>
                            <div style="flex: 1;">
                                <input type="number" id="initZ" step="0.1" value="0" 
                                       placeholder="Z"
                                       style="width: 100%; padding: 6px; border: 1px solid var(--border); border-radius: 4px; font-size: 12px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="vrpControls" class="benchmark-controls hide">
                <div class="control-group">
                    <div class="select-wrap">
                        <label>Format</label>
                        <select id="vrpFormat">
                            <option value="tsplib">TSPLIB95</option>
                            <option value="solomon">Solomon</option>
                            <option value="lilim">LiLim</option>
                            <option value="state">Heuristic State</option>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <div class="input-container">
                        <input type="file" id="fileSelector" accept='.txt,.vrp,.json'>
                    </div>
                </div>
            </div>
        </div>

        <!-- Algorithm Parameters -->
        <div class="column controls-panel">
            <div class="control-group">
                <div class="select-wrap">
                    <label>Population Type</label>
                    <select id="plotPopulation">
                        <option value="rosomaxa">Rosomaxa</option>
                        <option value="elitism">Elitism</option>
                        <option value="greedy">Greedy</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <label style="font-size: 10px; margin-bottom: 4px;">Max Generations</label>
                <input type="number" id="maxGenerations" min="100" max="10000" step="100" value="2000" 
                       style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; font-size: 14px;">
            </div>

            <div class="hide" id="generationControl" style="margin-top: 8px;">
                <label style="font-size: 10px;">Generation: <span id="currentGen">0</span> / <span id="maxGen">0</span></label>
                <input type="range" min="1" max="1000" id="generations" value="0" />
            </div>

        </div>

        <!-- Visualization Controls -->
        <div class="column controls-panel">
            <div class="control-row" style="gap: 8px;">
                <div class="control-group flex-1">
                    <label style="font-size: 10px;">Pitch <span id="pitchValue">0.10</span></label>
                    <input type="range" min="0" max="157" id="pitch" value="10" />
                </div>
                <div class="control-group flex-1">
                    <label style="font-size: 10px;">Yaw <span id="yawValue">0.50</span></label>
                    <input type="range" min="0" max="314" id="yaw" value="50" />
                </div>
            </div>

            <div id="status" class="status-box" style="margin-top: 8px;">Loading WebAssembly...</div>
            <button type="button" id="run" class="block run-button" style="margin-top: 12px;">â–¶ Run Experiment</button>
        </div>
    </div>

    <!-- horizontal tabulation with canvases -->
    <div id="canvasTab">
        <div class="tab">
            <button id="solutionTabButton" class="tablinks">Solution Space</button>
            <button id="searchTabButton" class="tablinks">Search Iteration</button>
            <button id="overallTabButton" class="tablinks">Overall Stats</button>
            <button id="bestTabButton" class="tablinks">Best Stats</button>
            <button id="durationTabButton" class="tablinks">Duration Stats</button>
            <button id="fitnessTabButton" class="tablinks">Best Fitness</button>
        </div>
        <div id="solutionTab" class="tabcontent">
            <canvas id="solutionCanvas" width="800" height="600"></canvas>
        </div>
        <div id="searchTab" class="tabcontent">
            <canvas id="searchCanvas" width="800" height="400"></canvas>
        </div>
        <div id="bestTab" class="tabcontent">
            <canvas id="bestCanvas" width="800" height="600"></canvas>
        </div>
        <div id="durationTab" class="tabcontent">
            <canvas id="durationCanvas" width="800" height="600"></canvas>
        </div>
        <div id="overallTab" class="tabcontent">
            <canvas id="overallCanvas" width="800" height="600"></canvas>
        </div>
        <div id="fitnessTab" class="tabcontent">
            <canvas id="fitnessCanvas" width="800" height="600"></canvas>
        </div>
    </div>
</main>
<footer>
    <a href="https://github.com/reinterpretcat/vrp" target="a">Repo</a> |
    <a href="https://crates.io/crates/vrp-cli" target="a">Crates</a> |
    <a href="https://docs.rs/vrp-core" target="a">Docs</a>
</footer>
</body>
</html>
